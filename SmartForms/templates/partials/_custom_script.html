<script>
    {% if messages %}
    {% for message in messages %}
    Swal.fire({
        icon: "{% if message.tags == 'danger' %}error{% else %}{{ message.tags }}{% endif %}",
        title: "{{ message }}",
        toast: true,
        position: 'top-end',
        showConfirmButton: false,
        timer: 3000,
        timerProgressBar: true,
        didOpen: (toast) => {
            toast.addEventListener('mouseenter', Swal.stopTimer)
            toast.addEventListener('mouseleave', Swal.resumeTimer)
        }
    });
    {% endfor %}
    {% endif %}

    // Global Delete Confirmation
    function confirmDelete(formId) {
        confirmAction(formId, 'Are you sure?', "You won't be able to revert this!", 'warning', 'Yes, delete it!');
    }

    // Generic Action Confirmation
    function confirmAction(formId, title, text, icon, confirmText) {
        Swal.fire({
            title: title || 'Are you sure?',
            text: text || "You won't be able to revert this!",
            icon: icon || 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: confirmText || 'Yes, proceed!'
        }).then((result) => {
            if (result.isConfirmed) {
                document.getElementById(formId).submit();
            }
        })
    }
</script>